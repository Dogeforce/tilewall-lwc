<template>
  <lightning-card title={title} icon-name={iconName}>
    <div class="slds-var-m-around_small">
      <div class={gridCSS}>
        <div class="tilewall-week">
          <template for:each={days} for:item="day">
            <div
              class="tilewall-day_name slds-text-body_small slds-var-m-right_x-small"
              key={day.no}
            >
              {day.name}
            </div>
          </template>
        </div>
        <template for:each={weeks} for:item="week">
          <div class="tilewall-week" key={week.id}>
            <template for:each={week.days} for:item="day">
              <c-tilewall-day
                count={day.count}
                date={day.date}
                key={day.id}
                max-count={maxRecordCount}
                ondayselected={handleDaySelected}
              ></c-tilewall-day>
            </template>
          </div>
        </template>
      </div>

      <div>
        <c-tilewall-day-detail
          day={selectedDay}
          template={messageTemplate}
        ></c-tilewall-day-detail>
        <c-related-records-list
          custom-where-clause={customWhereClause}
          date-field-name={groupByFieldName}
          hide-config-error-messages={hideConfigErrorMessages}
          if:true={showRelatedRecordsList}
          object-name={relatedObjectName}
          parent-id={recordId}
          relationship-field={relationshipFieldName}
        >
        </c-related-records-list>
      </div>
    </div>
  </lightning-card>
</template>
